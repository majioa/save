SAVE_FILE	PROC	NEAR
	;si-name
	;dx-buffer
	;cx-lenght
	PUSH	AX
	PUSH	DI
	MOV	AH,3CH
	MOV	AL,01
	PUSH	CX
	PUSH	DX
	XOR	CX,CX
	XCHG	SI,DX
	INT	21H
	JC	SAVE_ERROR
	MOV	BX,AX
;	PUSH	BX
;	MOV	AX,4200H
;	XOR	CX,CX
;	MOV	DX,CX
;	INT	21H
;	JC	SAVE_ERROR
;	POP	BX
	POP	DX
	POP	CX
	PUSH	BX
	MOV	AH,40H
	INT	21H
	JC	SAVE_ERROR
	POP	BX
	MOV	AH,3EH
	INT	21H
	JC	SAVE_ERROR
	POP	DI
	POP	AX
	RET
SAVE_ERROR:
	INT	20H
ENDP

